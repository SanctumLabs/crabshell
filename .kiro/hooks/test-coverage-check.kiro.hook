{
  "enabled": true,
  "name": "Test Coverage Checker",
  "description": "When source files are modified, this hook identifies new or modified functions/methods, checks if corresponding tests exist and cover the changes, generates test cases for missing coverage, runs tests to verify they pass, and updates coverage reports",
  "version": "1",
  "when": {
    "type": "fileEdited",
    "patterns": [
      "src/**/*.rs"
    ]
  },
  "then": {
    "type": "askAgent",
    "prompt": "A source file has been modified. Please:\n\n1. Analyze the modified file to identify new or changed functions and methods\n2. Check if corresponding tests exist in the tests/ directory that cover these changes\n3. If test coverage is missing or insufficient:\n   - Generate appropriate test cases for the new/modified code\n   - Follow the project's testing patterns (integration tests in tests/ directory)\n   - Use the existing test structure (tests/commands/ for command tests, tests/utils/ for utility tests)\n4. Run `cargo test --verbose` to verify all tests pass\n5. Generate a coverage report summary showing what was tested\n\nProvide a clear summary of:\n- What functions/methods were added or modified\n- Which tests cover them (existing or newly created)\n- Test results\n- Any gaps in coverage that still need attention"
  }
}